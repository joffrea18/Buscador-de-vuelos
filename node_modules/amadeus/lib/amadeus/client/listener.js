"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _response = _interopRequireDefault(require("./response"));
var _util = _interopRequireDefault(require("util"));
var _errors = require("./errors");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
/**
 * Listen to changes in the HTTP request and build Response/ResponseError
 * objects accordingly.
 *
 * @param {Request} request the request object used to make the call
 * @param {EventEmitter} emitter a Node event emitter
 * @param {Client} client the client instance to log results to
 * @protected
 */
var Listener = /*#__PURE__*/function () {
  function Listener(request, emitter, client) {
    _classCallCheck(this, Listener);
    this.request = request;
    this.emitter = emitter;
    this.client = client;
  }

  // PROTECTED

  /**
   * Listens to various events on the http_response object, listening for data,
   * connections closing for bad reasons, and the end of the response.
   *
   * Used by the Client when making an API call.
   *
   * @param  {Object} http_response a Node http response object
   * @protected
   */
  _createClass(Listener, [{
    key: "onResponse",
    value: function onResponse(http_response) {
      var response = new _response["default"](http_response, this.request);
      http_response.on('data', response.addChunk.bind(response));
      http_response.on('end', this.onEnd(response).bind(this));
      http_response.on('close', this.onNetworkError(response).bind(this));
      http_response.on('error', this.onNetworkError(response).bind(this));
    }

    /**
     * Listens to a network error when making an API call.
     *
     * Used by the Client when making an API call.
     *
     * @param  {Object} http_response a Node http response object
     * @protected
     */
  }, {
    key: "onError",
    value: function onError(http_response) {
      var response = new _response["default"](http_response, this.request);
      this.onNetworkError(response)();
    }

    // PRIVATE

    /**
     * When the connection ends, check if the response can be parsed or not and
     * act accordingly.
     *
     * @param  {Response} response
     */
  }, {
    key: "onEnd",
    value: function onEnd(response) {
      var _this = this;
      return function () {
        response.parse();
        if (response.success()) {
          _this.onSuccess(response);
        } else {
          _this.onFail(response);
        }
      };
    }

    /**
     * When the response was successful, resolve the promise and return the
     * response object
     *
     * @param  {Response} response
     */
  }, {
    key: "onSuccess",
    value: function onSuccess(response) {
      this.log(response);
      this.emitter.emit('resolve', response);
    }

    /**
     * When the connection was not successful, determine the reason and resolve
     * the promise accordingly.
     *
     * @param  {Response} response
     */
  }, {
    key: "onFail",
    value: function onFail(response) {
      var Error = this.errorFor(response);
      var error = new Error(response);
      this.log(response, error);
      this.emitter.emit('reject', error);
    }

    /**
     * Find the right error for the given response.
     *
     * @param {Response} reponse
     * @returns {ResponseError}
     */
  }, {
    key: "errorFor",
    value: function errorFor(_ref) {
      var statusCode = _ref.statusCode,
        parsed = _ref.parsed;
      var error = null;
      if (statusCode >= 500) {
        error = _errors.ServerError;
      } else if (statusCode === 401) {
        error = _errors.AuthenticationError;
      } else if (statusCode === 404) {
        error = _errors.NotFoundError;
      } else if (statusCode >= 400) {
        error = _errors.ClientError;
      } else if (!parsed) {
        error = _errors.ParserError;
      } else {
        error = _errors.UnknownError;
      }
      return error;
    }

    /**
     * When the connection ran into a network error, reject the promise with a
     * NetworkError.
     *
     * @param  {Response} response
     */
  }, {
    key: "onNetworkError",
    value: function onNetworkError(response) {
      var _this2 = this;
      return function () {
        response.parse();
        var error = new _errors.NetworkError(response);
        _this2.log(response, error);
        _this2.emitter.emit('reject', error);
      };
    }

    /**
     * Logs the response, when in debug mode
     *
     * @param  {Response} response the response object to log
     * @private
     */
  }, {
    key: "log",
    value: function log(response, error) {
      if (this.client.debug()) {
        /* istanbul ignore next */
        this.client.logger.log(_util["default"].inspect(response, false, null));
      }
      if (!this.client.debug() && this.client.warn() && error) {
        /* istanbul ignore next */
        this.client.logger.log('Amadeus', error.code, error.description);
      }
    }
  }]);
  return Listener;
}();
var _default = Listener;
exports["default"] = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMaXN0ZW5lciIsInJlcXVlc3QiLCJlbWl0dGVyIiwiY2xpZW50IiwiaHR0cF9yZXNwb25zZSIsInJlc3BvbnNlIiwiUmVzcG9uc2UiLCJvbiIsImFkZENodW5rIiwiYmluZCIsIm9uRW5kIiwib25OZXR3b3JrRXJyb3IiLCJwYXJzZSIsInN1Y2Nlc3MiLCJvblN1Y2Nlc3MiLCJvbkZhaWwiLCJsb2ciLCJlbWl0IiwiRXJyb3IiLCJlcnJvckZvciIsImVycm9yIiwic3RhdHVzQ29kZSIsInBhcnNlZCIsIlNlcnZlckVycm9yIiwiQXV0aGVudGljYXRpb25FcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJDbGllbnRFcnJvciIsIlBhcnNlckVycm9yIiwiVW5rbm93bkVycm9yIiwiTmV0d29ya0Vycm9yIiwiZGVidWciLCJsb2dnZXIiLCJ1dGlsIiwiaW5zcGVjdCIsIndhcm4iLCJjb2RlIiwiZGVzY3JpcHRpb24iXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYW1hZGV1cy9jbGllbnQvbGlzdGVuZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlc3BvbnNlIGZyb20gJy4vcmVzcG9uc2UnO1xuaW1wb3J0IHV0aWwgICAgIGZyb20gJ3V0aWwnO1xuXG5pbXBvcnQge1xuICBTZXJ2ZXJFcnJvcixcbiAgTm90Rm91bmRFcnJvcixcbiAgQ2xpZW50RXJyb3IsXG4gIFBhcnNlckVycm9yLFxuICBVbmtub3duRXJyb3IsXG4gIE5ldHdvcmtFcnJvcixcbiAgQXV0aGVudGljYXRpb25FcnJvclxufSBmcm9tICcuL2Vycm9ycyc7XG5cblxuLyoqXG4gKiBMaXN0ZW4gdG8gY2hhbmdlcyBpbiB0aGUgSFRUUCByZXF1ZXN0IGFuZCBidWlsZCBSZXNwb25zZS9SZXNwb25zZUVycm9yXG4gKiBvYmplY3RzIGFjY29yZGluZ2x5LlxuICpcbiAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCB0aGUgcmVxdWVzdCBvYmplY3QgdXNlZCB0byBtYWtlIHRoZSBjYWxsXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBhIE5vZGUgZXZlbnQgZW1pdHRlclxuICogQHBhcmFtIHtDbGllbnR9IGNsaWVudCB0aGUgY2xpZW50IGluc3RhbmNlIHRvIGxvZyByZXN1bHRzIHRvXG4gKiBAcHJvdGVjdGVkXG4gKi9cbmNsYXNzIExpc3RlbmVyIHtcbiAgY29uc3RydWN0b3IocmVxdWVzdCwgZW1pdHRlciwgY2xpZW50KSB7XG4gICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICB0aGlzLmVtaXR0ZXIgPSBlbWl0dGVyO1xuICAgIHRoaXMuY2xpZW50ICA9IGNsaWVudDtcbiAgfVxuXG4gIC8vIFBST1RFQ1RFRFxuXG5cbiAgLyoqXG4gICAqIExpc3RlbnMgdG8gdmFyaW91cyBldmVudHMgb24gdGhlIGh0dHBfcmVzcG9uc2Ugb2JqZWN0LCBsaXN0ZW5pbmcgZm9yIGRhdGEsXG4gICAqIGNvbm5lY3Rpb25zIGNsb3NpbmcgZm9yIGJhZCByZWFzb25zLCBhbmQgdGhlIGVuZCBvZiB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIFVzZWQgYnkgdGhlIENsaWVudCB3aGVuIG1ha2luZyBhbiBBUEkgY2FsbC5cbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSBodHRwX3Jlc3BvbnNlIGEgTm9kZSBodHRwIHJlc3BvbnNlIG9iamVjdFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBvblJlc3BvbnNlKGh0dHBfcmVzcG9uc2UpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoaHR0cF9yZXNwb25zZSwgdGhpcy5yZXF1ZXN0KTtcblxuICAgIGh0dHBfcmVzcG9uc2Uub24oJ2RhdGEnLCAgcmVzcG9uc2UuYWRkQ2h1bmsuYmluZChyZXNwb25zZSkpO1xuICAgIGh0dHBfcmVzcG9uc2Uub24oJ2VuZCcsICAgdGhpcy5vbkVuZChyZXNwb25zZSkuYmluZCh0aGlzKSk7XG4gICAgaHR0cF9yZXNwb25zZS5vbignY2xvc2UnLCB0aGlzLm9uTmV0d29ya0Vycm9yKHJlc3BvbnNlKS5iaW5kKHRoaXMpKTtcbiAgICBodHRwX3Jlc3BvbnNlLm9uKCdlcnJvcicsIHRoaXMub25OZXR3b3JrRXJyb3IocmVzcG9uc2UpLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbnMgdG8gYSBuZXR3b3JrIGVycm9yIHdoZW4gbWFraW5nIGFuIEFQSSBjYWxsLlxuICAgKlxuICAgKiBVc2VkIGJ5IHRoZSBDbGllbnQgd2hlbiBtYWtpbmcgYW4gQVBJIGNhbGwuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gaHR0cF9yZXNwb25zZSBhIE5vZGUgaHR0cCByZXNwb25zZSBvYmplY3RcbiAgICogQHByb3RlY3RlZFxuICAgKi9cblxuICBvbkVycm9yKGh0dHBfcmVzcG9uc2UpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoaHR0cF9yZXNwb25zZSwgdGhpcy5yZXF1ZXN0KTtcbiAgICB0aGlzLm9uTmV0d29ya0Vycm9yKHJlc3BvbnNlKSgpO1xuICB9XG5cbiAgLy8gUFJJVkFURVxuXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbm5lY3Rpb24gZW5kcywgY2hlY2sgaWYgdGhlIHJlc3BvbnNlIGNhbiBiZSBwYXJzZWQgb3Igbm90IGFuZFxuICAgKiBhY3QgYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSAge1Jlc3BvbnNlfSByZXNwb25zZVxuICAgKi9cbiAgb25FbmQocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmVzcG9uc2UucGFyc2UoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKCkpIHsgdGhpcy5vblN1Y2Nlc3MocmVzcG9uc2UpOyB9XG4gICAgICBlbHNlIHsgdGhpcy5vbkZhaWwocmVzcG9uc2UpOyAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0aGUgcmVzcG9uc2Ugd2FzIHN1Y2Nlc3NmdWwsIHJlc29sdmUgdGhlIHByb21pc2UgYW5kIHJldHVybiB0aGVcbiAgICogcmVzcG9uc2Ugb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSAge1Jlc3BvbnNlfSByZXNwb25zZVxuICAgKi9cbiAgb25TdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgdGhpcy5sb2cocmVzcG9uc2UpO1xuICAgIHRoaXMuZW1pdHRlci5lbWl0KCdyZXNvbHZlJywgcmVzcG9uc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbm5lY3Rpb24gd2FzIG5vdCBzdWNjZXNzZnVsLCBkZXRlcm1pbmUgdGhlIHJlYXNvbiBhbmQgcmVzb2x2ZVxuICAgKiB0aGUgcHJvbWlzZSBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogQHBhcmFtICB7UmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqL1xuICBvbkZhaWwocmVzcG9uc2UpIHtcbiAgICBsZXQgRXJyb3IgPSB0aGlzLmVycm9yRm9yKHJlc3BvbnNlKTtcbiAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2UpO1xuICAgIHRoaXMubG9nKHJlc3BvbnNlLCBlcnJvcik7XG4gICAgdGhpcy5lbWl0dGVyLmVtaXQoJ3JlamVjdCcsIGVycm9yKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHJpZ2h0IGVycm9yIGZvciB0aGUgZ2l2ZW4gcmVzcG9uc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlcG9uc2VcbiAgICogQHJldHVybnMge1Jlc3BvbnNlRXJyb3J9XG4gICAqL1xuICBlcnJvckZvcih7c3RhdHVzQ29kZSwgcGFyc2VkfSkge1xuICAgIGxldCBlcnJvciA9IG51bGw7XG4gICAgaWYgKHN0YXR1c0NvZGUgPj0gNTAwKSB7IGVycm9yID0gU2VydmVyRXJyb3I7IH1cbiAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDEpIHsgZXJyb3IgPSBBdXRoZW50aWNhdGlvbkVycm9yOyB9XG4gICAgZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDA0KSB7IGVycm9yID0gTm90Rm91bmRFcnJvcjsgfVxuICAgIGVsc2UgaWYgKHN0YXR1c0NvZGUgPj0gNDAwKSB7IGVycm9yID0gQ2xpZW50RXJyb3I7IH1cbiAgICBlbHNlIGlmICghcGFyc2VkKSB7IGVycm9yID0gUGFyc2VyRXJyb3I7IH1cbiAgICBlbHNlIHsgZXJyb3IgPSBVbmtub3duRXJyb3I7IH1cbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0aGUgY29ubmVjdGlvbiByYW4gaW50byBhIG5ldHdvcmsgZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZSB3aXRoIGFcbiAgICogTmV0d29ya0Vycm9yLlxuICAgKlxuICAgKiBAcGFyYW0gIHtSZXNwb25zZX0gcmVzcG9uc2VcbiAgICovXG4gIG9uTmV0d29ya0Vycm9yKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlc3BvbnNlLnBhcnNlKCk7XG4gICAgICBsZXQgZXJyb3IgPSBuZXcgTmV0d29ya0Vycm9yKHJlc3BvbnNlKTtcbiAgICAgIHRoaXMubG9nKHJlc3BvbnNlLCBlcnJvcik7XG4gICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgncmVqZWN0JywgZXJyb3IpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTG9ncyB0aGUgcmVzcG9uc2UsIHdoZW4gaW4gZGVidWcgbW9kZVxuICAgKlxuICAgKiBAcGFyYW0gIHtSZXNwb25zZX0gcmVzcG9uc2UgdGhlIHJlc3BvbnNlIG9iamVjdCB0byBsb2dcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxvZyhyZXNwb25zZSwgZXJyb3IpIHtcbiAgICBpZiAodGhpcy5jbGllbnQuZGVidWcoKSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHRoaXMuY2xpZW50LmxvZ2dlci5sb2codXRpbC5pbnNwZWN0KHJlc3BvbnNlLCBmYWxzZSwgbnVsbCkpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuY2xpZW50LmRlYnVnKCkgJiYgdGhpcy5jbGllbnQud2FybigpICYmIGVycm9yKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgdGhpcy5jbGllbnQubG9nZ2VyLmxvZygnQW1hZGV1cycsIGVycm9yLmNvZGUsIGVycm9yLmRlc2NyaXB0aW9uKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGlzdGVuZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQVFrQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQSxJQVNNQSxRQUFRO0VBQ1osa0JBQVlDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxNQUFNLEVBQUU7SUFBQTtJQUNwQyxJQUFJLENBQUNGLE9BQU8sR0FBR0EsT0FBTztJQUN0QixJQUFJLENBQUNDLE9BQU8sR0FBR0EsT0FBTztJQUN0QixJQUFJLENBQUNDLE1BQU0sR0FBSUEsTUFBTTtFQUN2Qjs7RUFFQTs7RUFHQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFSRTtJQUFBO0lBQUEsT0FTQSxvQkFBV0MsYUFBYSxFQUFFO01BQ3hCLElBQUlDLFFBQVEsR0FBRyxJQUFJQyxvQkFBUSxDQUFDRixhQUFhLEVBQUUsSUFBSSxDQUFDSCxPQUFPLENBQUM7TUFFeERHLGFBQWEsQ0FBQ0csRUFBRSxDQUFDLE1BQU0sRUFBR0YsUUFBUSxDQUFDRyxRQUFRLENBQUNDLElBQUksQ0FBQ0osUUFBUSxDQUFDLENBQUM7TUFDM0RELGFBQWEsQ0FBQ0csRUFBRSxDQUFDLEtBQUssRUFBSSxJQUFJLENBQUNHLEtBQUssQ0FBQ0wsUUFBUSxDQUFDLENBQUNJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztNQUMxREwsYUFBYSxDQUFDRyxFQUFFLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQ0ksY0FBYyxDQUFDTixRQUFRLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO01BQ25FTCxhQUFhLENBQUNH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